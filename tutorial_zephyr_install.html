<!DOCTYPE html>
<html class="writer-html5" lang="vi">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MỘT SỐ HƯỞNG DẪN VỀ ZEPHYR PROJECT - ZEPHYR OS &mdash; Tài liệu Tutorial Zephyr in UBUNTU ver 1.0.1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Tìm Kiếm" href="search.html" />
    <link rel="next" title="LVGL" href="lvgl.html" />
    <link rel="prev" title="Home" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Tutorial Zephyr in UBUNTU
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">MỘT SỐ HƯỞNG DẪN VỀ ZEPHYR PROJECT - ZEPHYR OS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#yeu-cau-ve-phan-cung">Yêu cầu về phần cứng</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cac-buoc-cai-dat">Các bước cài đặt</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#buoc-1-cai-dat-cac-tool-phu-thuoc-cmake-python-devicetree-compiler">Bước 1: Cài đặt các tool phụ thuộc (CMake, Python, Devicetree compiler)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-2-cai-moi-truong-ao-va-zephyr-project">Bước 2: Cài môi trường ảo và zephyr project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-3-cai-zephyr-sdk">Bước 3: Cài Zephyr SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-4-build-mot-project-sample">Bước 4: Build một project sample</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cau-truc-ve-zephyr-project">Cấu trúc về Zephyr Project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#buoc-1-khoi-tao-workspace-folder-my-workspace">Bước 1: Khởi tạo workspace folder (<em>my-workspace</em>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-2-chinh-sua-lai-file-set-up-thu-vien-cho-project">Bước 2: Chỉnh sửa lại file set up thư viện cho project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-3-update-thu-vien-cho-project-va-build-flash-trong-project">Bước 3: Update thư viện cho project và build, flash trong project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-3-giai-thich-cac-folder-chinh-co-trong-project">Bước 3: Giải thích các folder chính có trong project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#guiconfig">Guiconfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debug-cho-arm-stm32-su-dung-openocd-vscode">Debug cho ARM [STM32]sử dụng OpenOCD + VSCODE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#buoc-1-cai-dat-openocd">Bước 1: Cài đặt openocd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-2-cai-dat-cac-extension-trong-vscode">Bước 2: Cài đặt các extension trong vscode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-3-them-cac-file-json-de-debug-duoc-tren-vscode">Bước 3: Thêm các file json để debug được trên vscode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buoc-4-debug">Bước 4: Debug</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lvgl.html">LVGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="kernel_zephyr/thread/index.html">Threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sphinx/index.html">Sphinx</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tutorial Zephyr in UBUNTU</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">MỘT SỐ HƯỞNG DẪN VỀ ZEPHYR PROJECT - ZEPHYR OS</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial_zephyr_install.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mot-so-huong-dan-ve-zephyr-project-zephyr-os">
<h1>MỘT SỐ HƯỞNG DẪN VỀ ZEPHYR PROJECT - ZEPHYR OS<a class="headerlink" href="#mot-so-huong-dan-ve-zephyr-project-zephyr-os" title="Permalink to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#yeu-cau-ve-phan-cung" id="id1">Yêu cầu về phần cứng</a></p></li>
<li><p><a class="reference internal" href="#cac-buoc-cai-dat" id="id2">Các bước cài đặt</a></p>
<ul>
<li><p><a class="reference internal" href="#buoc-1-cai-dat-cac-tool-phu-thuoc-cmake-python-devicetree-compiler" id="id3">Bước 1: Cài đặt các tool phụ thuộc (CMake, Python, Devicetree compiler)</a></p></li>
<li><p><a class="reference internal" href="#buoc-2-cai-moi-truong-ao-va-zephyr-project" id="id4">Bước 2: Cài môi trường ảo và zephyr project</a></p></li>
<li><p><a class="reference internal" href="#buoc-3-cai-zephyr-sdk" id="id5">Bước 3: Cài Zephyr SDK</a></p></li>
<li><p><a class="reference internal" href="#buoc-4-build-mot-project-sample" id="id6">Bước 4: Build một project sample</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cau-truc-ve-zephyr-project" id="id7">Cấu trúc về Zephyr Project</a></p>
<ul>
<li><p><a class="reference internal" href="#buoc-1-khoi-tao-workspace-folder-my-workspace" id="id8">Bước 1: Khởi tạo workspace folder (<em>my-workspace</em>)</a></p></li>
<li><p><a class="reference internal" href="#buoc-2-chinh-sua-lai-file-set-up-thu-vien-cho-project" id="id9">Bước 2: Chỉnh sửa lại file set up thư viện cho project</a></p></li>
<li><p><a class="reference internal" href="#buoc-3-update-thu-vien-cho-project-va-build-flash-trong-project" id="id10">Bước 3: Update thư viện cho project và build, flash trong project</a></p></li>
<li><p><a class="reference internal" href="#buoc-3-giai-thich-cac-folder-chinh-co-trong-project" id="id11">Bước 3: Giải thích các folder chính có trong project</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#guiconfig" id="id12">Guiconfig</a></p></li>
<li><p><a class="reference internal" href="#debug-cho-arm-stm32-su-dung-openocd-vscode" id="id13">Debug cho ARM [STM32]sử dụng OpenOCD + VSCODE</a></p>
<ul>
<li><p><a class="reference internal" href="#buoc-1-cai-dat-openocd" id="id14">Bước 1: Cài đặt openocd</a></p></li>
<li><p><a class="reference internal" href="#buoc-2-cai-dat-cac-extension-trong-vscode" id="id15">Bước 2: Cài đặt các extension trong vscode</a></p></li>
<li><p><a class="reference internal" href="#buoc-3-them-cac-file-json-de-debug-duoc-tren-vscode" id="id16">Bước 3: Thêm các file json để debug được trên vscode</a></p></li>
<li><p><a class="reference internal" href="#buoc-4-debug" id="id17">Bước 4: Debug</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="yeu-cau-ve-phan-cung">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Yêu cầu về phần cứng</a><a class="headerlink" href="#yeu-cau-ve-phan-cung" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Ubuntu version từ 20 trở lên (khuyến nghị cài dual boot nếu sài máy áo có thể bị lỗi khi flash vào chip).</p></li>
<li><p>Ổ cứng cấp phát cho ubuntu trên 20GB.</p></li>
<li><p>Board sử dụng là STM32F746G_Disco.</p></li>
</ul>
</section>
<section id="cac-buoc-cai-dat">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Các bước cài đặt</a><a class="headerlink" href="#cac-buoc-cai-dat" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Ghi chú</p>
<p>Lưu ý trước khi cài đặt là đảm bảo mạng kết nối luôn ổn định và máy tính không được mất điện giữa lúc cài
(đây là ubuntu nên cái gì cũng có thể đi luôn cái ubuntu)</p>
</div>
<section id="buoc-1-cai-dat-cac-tool-phu-thuoc-cmake-python-devicetree-compiler">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Bước 1: Cài đặt các tool phụ thuộc (CMake, Python, Devicetree compiler)</a><a class="headerlink" href="#buoc-1-cai-dat-cac-tool-phu-thuoc-cmake-python-devicetree-compiler" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Sử dụng <code class="docutils literal notranslate"><span class="pre">apt</span></code> để cài đặt các tool:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install --no-install-recommends git cmake ninja-build gperf <span class="se">\</span>
ccache dfu-util device-tree-compiler wget <span class="se">\</span>
python3-dev python3-pip python3-setuptools python3-tk python3-wheel xz-utils file <span class="se">\</span>
make gcc gcc-multilib g++-multilib libsdl2-dev libmagic1
</pre></div>
</div>
<ul class="simple">
<li><p>Check lại xem đã cài được chưa:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --version
python3 --version
dtc --version
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Kết quả:</strong></p></li>
</ul>
<img alt="alternate text" src="_images/img_1.png" />
</section>
<section id="buoc-2-cai-moi-truong-ao-va-zephyr-project">
<span id="activate-virtual-environment"></span><h3><a class="toc-backref" href="#id4" role="doc-backlink">Bước 2: Cài môi trường ảo và zephyr project</a><a class="headerlink" href="#buoc-2-cai-moi-truong-ao-va-zephyr-project" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Sử dụng <code class="docutils literal notranslate"><span class="pre">apt</span></code> để cài gói <code class="docutils literal notranslate"><span class="pre">venv</span></code> của Python:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-venv
</pre></div>
</div>
<ul class="simple">
<li><p>Tạo môi trường ảo:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m venv ~/zephyrproject/.venv
</pre></div>
</div>
<ul class="simple">
<li><p>Activate môi trường ảo:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/zephyrproject/.venv/bin/activate
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Ghi chú</p>
<p>Lưu ý: mỗi khi muốn build hoặc flash zephyr project đều phải sử dụng lệnh này.</p>
</div>
<ul class="simple">
<li><p>Cài đặt <code class="docutils literal notranslate"><span class="pre">west</span></code>:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install west
</pre></div>
</div>
<ul class="simple">
<li><p>Get source code của Zephyr:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west init ~/zephyrproject
<span class="nb">cd</span> ~/zephyrproject
west update
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Ghi chú</p>
<p>Lưu ý: đây là nguồn để học về các hàm sử dụng trong zephyr rất hiệu quả nên hãy cố gắng khai thác hết mức có thể.</p>
</div>
<ul class="simple">
<li><p>Export Zephyr CMake package:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west zephyr-export
</pre></div>
</div>
<ul class="simple">
<li><p>Cài đặt các requirement:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r ~/zephyrproject/zephyr/scripts/requirements.txt
</pre></div>
</div>
</section>
<section id="buoc-3-cai-zephyr-sdk">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Bước 3: Cài Zephyr SDK</a><a class="headerlink" href="#buoc-3-cai-zephyr-sdk" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Tải và verify Zephyr SDK:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~
wget https://github.com/zephyrproject-rtos/sdk-ng/releases/download/v0.16.4/zephyr-sdk-0.16.4_linux-x86_64.tar.xz
wget -O - https://github.com/zephyrproject-rtos/sdk-ng/releases/download/v0.16.4/sha256.sum <span class="p">|</span> shasum --check --ignore-missing
</pre></div>
</div>
<ul class="simple">
<li><p>Giải nén tệp vừa tải:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar xvf zephyr-sdk-0.16.4_linux-x86_64.tar.xz
</pre></div>
</div>
<ul class="simple">
<li><p>Cài đặt Zephyr SDK:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> zephyr-sdk-0.16.4
./setup.sh
</pre></div>
</div>
</section>
<section id="buoc-4-build-mot-project-sample">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Bước 4: Build một project sample</a><a class="headerlink" href="#buoc-4-build-mot-project-sample" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Chọn một project sample:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~
<span class="nb">cd</span> ./zephyrproject/zephyr/samples/basic/blinky
</pre></div>
</div>
<ul class="simple">
<li><p>Chọn Board để build:</p></li>
</ul>
<p><strong>Các board mà zephyr hổ trở:</strong> <a class="reference external" href="https://docs.zephyrproject.org/latest/boards/index.html#boards">Supported Boards</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west build -p always -b &lt;your-board-name&gt;
</pre></div>
</div>
<p><strong>Nếu bạn thêm lệnh</strong> <code class="docutils literal notranslate"><span class="pre">set(BOARD</span> <span class="pre">&lt;your-board-name&gt;)</span></code> <strong>trong file CMakeLists.txt trong project thì chỉ cần ghi:</strong> <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code></p>
<img alt="alternate text" src="_images/img_2.png" />
<p><strong>Nếu như bạn gặp lỗi:</strong></p>
<img alt="alternate text" src="_images/img_3.png" />
<p><strong>Hãy truy cập vào thư mục đó rồi chỉnh sửa file main.c như sau:</strong> <em>(Lưu ý sau khi thay đổi file main.c
hãy xóa thư mục build trong project đó hãy build lại)</em></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;zephyr/kernel.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;zephyr/drivers/gpio.h&gt;</span><span class="cp"></span>

<span class="cm">/* 1000 msec = 1 sec */</span><span class="w"></span>
<span class="cp">#define SLEEP_TIME_MS   1000</span>

<span class="cm">/* The devicetree node identifier for the &quot;led0&quot; alias. */</span><span class="w"></span>
<span class="cp">#define LED0_NODE DT_ALIAS(led0)</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">gpio_dt_spec</span><span class="w"> </span><span class="n">led</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_DT_SPEC_GET</span><span class="p">(</span><span class="n">LED0_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">gpios</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">led_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">gpio_is_ready_dt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">led</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_pin_configure_dt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">led</span><span class="p">,</span><span class="w"> </span><span class="n">GPIO_OUTPUT_ACTIVE</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpio_pin_toggle_dt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">led</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">led_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">led_state</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;LED state: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">led_state</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;ON&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;OFF&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">k_msleep</span><span class="p">(</span><span class="n">SLEEP_TIME_MS</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<img alt="alternate text" src="_images/img_4.png" />
</section>
</section>
<section id="cau-truc-ve-zephyr-project">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Cấu trúc về Zephyr Project</a><a class="headerlink" href="#cau-truc-ve-zephyr-project" title="Permalink to this heading"></a></h2>
<section id="buoc-1-khoi-tao-workspace-folder-my-workspace">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Bước 1: Khởi tạo workspace folder (<em>my-workspace</em>)</a><a class="headerlink" href="#buoc-1-khoi-tao-workspace-folder-my-workspace" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Ghi chú</p>
<p>Trước khi khởi tạo workspace folder hãy active virtual environment (<a class="reference internal" href="#activate-virtual-environment"><span class="std std-ref">Bước 2: Cài môi trường ảo và zephyr project</span></a>).</p>
<p>Dung lượng nơi lưu trử  &gt; 1GB.</p>
</div>
<ul class="simple">
<li><p>Chạy command như sau:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># initialize my-workspace for the example-application (main branch)</span>
west init -m https://github.com/zephyrproject-rtos/example-application --mr main my-workspace
</pre></div>
</div>
</section>
<section id="buoc-2-chinh-sua-lai-file-set-up-thu-vien-cho-project">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Bước 2: Chỉnh sửa lại file set up thư viện cho project</a><a class="headerlink" href="#buoc-2-chinh-sua-lai-file-set-up-thu-vien-cho-project" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Mở thư mục file <code class="docutils literal notranslate"><span class="pre">my-workspace/west.yml</span></code>. Mặc định nó sẽ như sau:</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Copyright (c) 2021 Nordic Semiconductor ASA</span><span class="w"></span>
<span class="c1"># SPDX-License-Identifier: Apache-2.0</span><span class="w"></span>

<span class="nt">manifest</span><span class="p">:</span><span class="w"></span>
<span class="nt">self</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">west-commands</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scripts/west-commands.yml</span><span class="w"></span>

<span class="nt">remotes</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zephyrproject-rtos</span><span class="w"></span>
<span class="w">    </span><span class="nt">url-base</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/zephyrproject-rtos</span><span class="w"></span>

<span class="nt">projects</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zephyr</span><span class="w"></span>
<span class="w">    </span><span class="nt">remote</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zephyrproject-rtos</span><span class="w"></span>
<span class="w">    </span><span class="nt">revision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span><span class="w"></span>
<span class="w">    </span><span class="nt">import</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># By using name-allowlist we can clone only the modules that are</span><span class="w"></span>
<span class="w">        </span><span class="c1"># strictly needed by the application.</span><span class="w"></span>
<span class="w">        </span><span class="nt">name-allowlist</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cmsis</span><span class="w">      </span><span class="c1"># required by the ARM port</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hal_nordic</span><span class="w"> </span><span class="c1"># required by the custom_plank board (Nordic based)</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hal_stm32</span><span class="w">  </span><span class="c1"># required by the nucleo_f302r8 board (STM32 based)</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Do ở đẩy sử dụng board STM32F746G_Disco, Nên chỉ cần <code class="docutils literal notranslate"><span class="pre">cmsis</span></code> và <code class="docutils literal notranslate"><span class="pre">hal_stm32</span></code> =&gt; xóa <code class="docutils literal notranslate"><span class="pre">hal_nordic</span></code> (<em>dùng cho board nrf</em>).</p></li>
</ul>
</section>
<section id="buoc-3-update-thu-vien-cho-project-va-build-flash-trong-project">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Bước 3: Update thư viện cho project và build, flash trong project</a><a class="headerlink" href="#buoc-3-update-thu-vien-cho-project-va-build-flash-trong-project" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Chạy command sau:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># update Zephyr modules</span>
<span class="nb">cd</span> my-workspace
west update
</pre></div>
</div>
<ul class="simple">
<li><p>Vào project có trong workspace:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./example-application
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Ghi chú</p>
<p>Đây là project mẫu không dành cho tất cả các board, thay đổi lại code
bên trong theo project của mình, có thể xóa những folder không cần trong
project.</p>
</div>
<ul class="simple">
<li><p>Build Project:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west build -b <span class="nv">$BOARD</span> app
</pre></div>
</div>
<ul class="simple">
<li><p>Flash vào chip:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west flash
</pre></div>
</div>
</section>
<section id="buoc-3-giai-thich-cac-folder-chinh-co-trong-project">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Bước 3: Giải thích các folder chính có trong project</a><a class="headerlink" href="#buoc-3-giai-thich-cac-folder-chinh-co-trong-project" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boards</span></code>: Chứa các file config dành cho board mà zephyr không hổ trợ sẳn.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drivers</span></code>: Viết thư viện dành cho các driver chứa có thư viện như button...</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dts</span></code>: Viết device tree cho chip mà zephyr không hổ trợ sẳn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include</span></code>: Chứa các file <em>header</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lib</span></code>: Chứa các file <em>.c</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app</span></code>: Chứa file <em>main.c</em>. folder này có chức năng chính dùng để build project (do có file CMakeLists.txt để
liên kết với các thư viện của zephyr).</p></li>
</ul>
</section>
</section>
<section id="guiconfig">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Guiconfig</a><a class="headerlink" href="#guiconfig" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Thay vì bạn sử dụng file <cite>pri.conf</cite> để config các ngoại vi, chức năng trên zephyr thì bạn có thể dùng gui.</p></li>
<li><p>Sử dụng lệnh:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west build -t guiconfig
</pre></div>
</div>
<img alt="alternate text" src="_images/img_5.png" />
</section>
<section id="debug-cho-arm-stm32-su-dung-openocd-vscode">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Debug cho ARM [STM32]sử dụng OpenOCD + VSCODE</a><a class="headerlink" href="#debug-cho-arm-stm32-su-dung-openocd-vscode" title="Permalink to this heading"></a></h2>
<section id="buoc-1-cai-dat-openocd">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Bước 1: Cài đặt openocd</a><a class="headerlink" href="#buoc-1-cai-dat-openocd" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Đầu tiên hãy kiểm tra xem máy tính đã có openOCD hay chưa: mở termial và gõ lệnh sau:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openocd
</pre></div>
</div>
<ul class="simple">
<li><p>Nếu màn hình terminal như sau thì máy bạn đã có (bỏ qua bước cài đặt):</p></li>
</ul>
<img alt="alternate text" src="_images/img_6.png" />
<ul class="simple">
<li><p>Nếu không xuất hiện màn hình như trên thì cài openOCD:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update
sudo apt upgrade
git clone https://github.com/openocd-org/openocd.git
<span class="nb">cd</span> openocd
./bootstrap
./configure -–prefix<span class="o">=</span>/usr/local –enable-ftdi –enable-stlink
make
sudo make install
</pre></div>
</div>
<ul class="simple">
<li><p>Tìm đường dẫn đến openocde lưu trong máy:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>which openocd
</pre></div>
</div>
<p><strong>Tham khảo cách cài đặt:</strong> <a class="reference external" href="https://www.youtube.com/watch?v=FNDp1G0bYoU">OPENOCD</a>.</p>
</section>
<section id="buoc-2-cai-dat-cac-extension-trong-vscode">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Bước 2: Cài đặt các extension trong vscode</a><a class="headerlink" href="#buoc-2-cai-dat-cac-extension-trong-vscode" title="Permalink to this heading"></a></h3>
<img alt="alternate text" src="_images/img_7.png" />
<img alt="alternate text" src="_images/img_8.png" />
<img alt="alternate text" src="_images/img_9.png" />
</section>
<section id="buoc-3-them-cac-file-json-de-debug-duoc-tren-vscode">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Bước 3: Thêm các file json để debug được trên vscode</a><a class="headerlink" href="#buoc-3-them-cac-file-json-de-debug-duoc-tren-vscode" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Thêm một thư mục .vscode gồm có hai file setting.json và launch.json</p></li>
<li><p><em>Lưu ý đổi thành đúng tên user mà máy tính các bạn đã cài đặt trên máy.</em></p></li>
</ul>
<p><strong>Nội dung file setting.json</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{</span>
<span class="go">    &quot;terminal.integrated.env.windows&quot;:</span>
<span class="go">    {</span>
<span class="go">        &quot;PATH&quot;: &quot;/home/dongkhoa/zephyrproject/zephyr/scripts;${env:PATH}&quot;,</span>
<span class="go">        &quot;ZEPHYR_BASE&quot;: &quot;/home/dongkhoa/zephyrprojec/zephyr&quot;</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<p><strong>Nội dung file launch.json</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{</span>
<span class="go">    &quot;version&quot;: &quot;0.2.0&quot;,</span>
<span class="go">    &quot;configurations&quot;:</span>
<span class="go">    [</span>
<span class="go">        {</span>
<span class="go">            &quot;name&quot;: &quot;STM32Debug&quot;,</span>
<span class="go">            &quot;device&quot;: &quot;STM32F746G_Disco&quot;,</span>
<span class="go">            &quot;gdbPath&quot;: &quot;/home/dongkhoa/zephyr-sdk-0.16.4/arm-zephyr-eabi/bin/arm-zephyr-eabi-gdb&quot;,</span>
<span class="go">            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,</span>
<span class="go">            &quot;executable&quot;: &quot;${workspaceFolder}/build/zephyr/zephyr.elf&quot;,</span>
<span class="go">            &quot;request&quot;: &quot;launch&quot;,</span>
<span class="go">            &quot;type&quot;: &quot;cortex-debug&quot;,</span>
<span class="go">            &quot;servertype&quot;: &quot;openocd&quot;,</span>
<span class="go">            &quot;interface&quot;: &quot;swd&quot;,</span>
<span class="go">            &quot;configFiles&quot;:[&quot;/home/dongkhoa/zephyrproject/zephyr/boards/arm/stm32f746g_disco/support/openocd.cfg&quot;],</span>
<span class="go">            &quot;runToEntryPoint&quot;: &quot;main&quot;,</span>
<span class="go">            &quot;postRestartCommands&quot;: [</span>
<span class="go">                &quot;break main&quot;,</span>
<span class="go">                &quot;continune&quot;</span>
<span class="go">            ]</span>
<span class="go">        }</span>
<span class="go">    ]</span>
<span class="go">}</span>
</pre></div>
</div>
</section>
<section id="buoc-4-debug">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Bước 4: Debug</a><a class="headerlink" href="#buoc-4-debug" title="Permalink to this heading"></a></h3>
<p><strong>Chọn vào nút màu xanh để bắt đầu debug</strong></p>
<img alt="alternate text" src="_images/img_10.png" />
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Home" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lvgl.html" class="btn btn-neutral float-right" title="LVGL" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, DONGKHOA.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>